tree("Root")
	parallel
		repeat mute tree("BeAlive")
		repeat mute tree("Die")

tree("BeAlive")
	fallback
		tree("Confrontation")
		tree("ChaseEnemy")
		tree("Idle")

tree("Confrontation")
	sequence
		HasTarget
		IsTargetInRange(7.0)
		GenerateAITransition	
		fallback
			sequence
				CheckInIdleState 
				IsTargetInRange(2.2)
				CheckAITransitionInRange(0.0, 0.3)
				tree("AttackMelee")
			sequence
				CheckInIdleState 
				DodgeNotInCooldown
				CheckAITransitionInRange(0.0, 0.4)
				fallback
					sequence
						IsTargetInRange(2.5)
						tree("BackRoll")
					sequence
						not IsTargetInRange(5.0)
						tree("FrontRoll")
					Fail
			sequence
				CheckInIdleState 
				not IsTargetInRange(3.0)
				CheckAITransitionInRange(0.0, 0.15)
				Wait(0.2)
				tree("Execute")
			sequence
				CheckInIdleState 
				CheckAITransitionInRange(0.0, 0.65)
				tree("Dodge")
		
			sequence
				CheckAITransitionInRange(0.0, 0.75)
				tree("Surrounding")
			sequence
				IsTargetInRange(7.0)
				not IsTargetInRange(3.0)
				StopMove
				ResetAITransition
				Wait(0.4)
			sequence
				ResetAITransition
				Wait(0.4)
						
				
				


tree("ChaseEnemy")
	sequence
		HasTarget
		not IsTargetInRange(7.0)
		SetInCrowd(false)
		KeepMove(4.0)
			

tree("Surrounding")
	sequence
		IsTargetInRange(7.0)
		SetInCrowd(true)
		ResetAITransition
		BeginMove	
		Wait(0.8)
		//StopMove
		//Wait(0.5)
	

tree("Dodge")
	sequence
		StopMove
		Wait(0.10)
		SetInputVectorToFaceTarget 
		GenerateAITransition	
		fallback
			sequence
				CheckAITransitionInRange(0.0, 0.6)
				IsTargetInRange(2.5)
				DodgeBack
				WaitForTransition (1)
				sequence
					GenerateAITransition	
					CheckAITransitionInRange(0.0, 0.7)
					not IsTargetInRange(4.0)
					tree("Execute")
			sequence
				CheckAITransitionInRange(0.0, 0.5)
				IsTargetInRange(4.0)
				not IsTargetInRange(2.0)
				RandomOrbitalDodge
				WaitForTransition (1)
			sequence
				CheckAITransitionInRange(0.0, 0.6)
				not IsTargetInRange(3.5)
				DodgeFront
				WaitForTransition (1)
				sequence
					GenerateAITransition	
					CheckAITransitionInRange(0.0, 0.7)
					IsTargetInRange(2.5)
					tree("AttackMelee")
			Fail
		ResetAITransition
		

tree("FrontRoll")
	sequence
		StopMove
		SetInputVectorToFaceTarget 
		ResetAITransition
		DodgeCommandInput
		Wait(0.20)
		DodgeCommandCancel
		WaitForTransitionNotLessThan (1)
		GenerateAITransition	
		fallback
			sequence
				IsTargetInRange(3.2)
				SetInputVectorToFaceTarget 
				tree("AttackMelee")
			ResetAITransition

tree("BackRoll")
	sequence
		StopMove
		SetInputVectorBackToTarget 
		ResetAITransition
		DodgeCommandInput
		Wait(0.20)
		DodgeCommandCancel
		WaitForTransitionNotLessThan (1)
		GenerateAITransition	
		fallback
			sequence
				CheckAITransitionInRange(0.0, 0.7)
				not IsTargetInRange(3.0)
				SetInputVectorToFaceTarget 
				tree("Execute")
			ResetAITransition

tree("AttackMelee")
	sequence
		StopMove
		//WaitRandom(0.2, 0.4)
		SetInputVectorToFaceTarget 
		ResetAITransition
		AttackCommandInput
		Wait(0.20)
		AttackCommandCancel
		WaitForTransitionNotLessThan (1)
		GenerateAITransition	
		sequence
			fallback
				sequence
					CheckAITransitionInRange(0.0, 0.7)
					IsTargetInRange(4.0)
				IsTargetInRange(2.5)
			SetInputVectorToFaceTarget 
			AttackCommandInput
			Wait(0.20)
			AttackCommandCancel
			WaitForTransitionNotLessThan (1)
			GenerateAITransition	
			sequence
				fallback
					sequence
						CheckAITransitionInRange(0.0, 0.7)
						IsTargetInRange(4.0)
					IsTargetInRange(2.5)
				SetInputVectorToFaceTarget 
				AttackCommandInput
				Wait(0.20)
				AttackCommandCancel
			ResetAITransition
		ResetAITransition


tree("Execute")
	sequence
		StopMove
		SetInputVectorToFaceTarget 
		ResetAITransition
		ExecuteCommandInput
		Wait(0.20)
		ExecuteCommandCancel
		Wait(0.30)
		WaitForTransitionNotLessThan (1)
		fallback
			sequence
				IsTargetInRange(2.5)
				SetInputVectorToFaceTarget 
				ExecuteCommandInput
				Wait(0.20)
				ExecuteCommandCancel
				WaitForTransitionNotLessThan (1)
			Wait(0.5)
	

tree("Idle")
	while
		sequence
			not HasTarget
			not FindTarget

		repeat
			Wait(1.0)


tree("Die")
	IsDead